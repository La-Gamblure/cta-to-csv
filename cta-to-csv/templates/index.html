<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTA to CSV</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .container {
            max-width: 800px;
            margin-top: 50px;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: none;
        }
        .card-header {
            background-color: #6c5ce7;
            color: white;
            border-radius: 15px 15px 0 0 !important;
            padding: 20px;
        }
        .form-control {
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 20px;
        }
        .btn-primary {
            background-color: #6c5ce7;
            border: none;
            border-radius: 10px;
            padding: 12px 25px;
            font-weight: 600;
        }
        .btn-primary:hover {
            background-color: #5649c0;
        }
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        .features {
            margin-top: 30px;
        }
        .feature-item {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
        }
        .feature-icon {
            margin-right: 15px;
            color: #6c5ce7;
            font-size: 24px;
        }
        .feature-text {
            flex: 1;
        }
        .footer {
            margin-top: 50px;
            text-align: center;
            color: #6c757d;
        }
        #nft-counter {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background-color: #e9ecef;
            border-radius: 10px;
            text-align: center;
        }
        
        /* Animation du personnage qui court apr√®s des cartes */
        .chase-scene {
            position: relative;
            height: 150px;
            margin: 30px auto;
            overflow: hidden;
            width: 100%;
            max-width: 500px;
        }
        
        .character {
            position: absolute;
            left: 20px;
            bottom: 20px;
            font-size: 40px;
            animation: run 1s infinite;
        }
        
        .card-1, .card-2, .card-3 {
            position: absolute;
            font-size: 30px;
            animation: float 3s infinite linear;
        }
        
        .card-1 {
            right: 20px;
            bottom: 40px;
            animation-delay: 0s;
        }
        
        .card-2 {
            right: 100px;
            bottom: 60px;
            animation-delay: 0.5s;
        }
        
        .card-3 {
            right: 180px;
            bottom: 30px;
            animation-delay: 1s;
        }
        
        @keyframes run {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes float {
            0% { transform: translateX(300px); }
            100% { transform: translateX(-300px); }
        }
        
        .funny-message {
            margin-top: 20px;
            font-style: italic;
            color: #6c757d;
        }
        
        .funny-messages {
            display: none;
        }
        
        /* Animation du bouton secret */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Animation pour le bouton */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        /* Style pour la notification CSV pr√™t */
        .csv-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 9999;
            transform: translateX(120%);
            transition: transform 0.5s ease;
            max-width: 300px;
        }

        .csv-notification.show {
            transform: translateX(0);
        }

        .csv-notification-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .csv-notification i {
            font-size: 1.5rem;
        }

        .csv-notification .btn-close {
            margin-left: auto;
            background: white;
            opacity: 0.8;
            padding: 5px;
            border-radius: 50%;
            width: 20px;
            height: 20px;
        }
        
        /* Animation pour le CSV pr√™t */
        .csv-notification {
            position: fixed;
            top: 20px;
            right: -350px;
            width: 300px;
            background-color: #fff;
            border-left: 5px solid #28a745;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-radius: 5px;
            padding: 0;
            z-index: 1050;
            transition: right 0.5s ease;
        }
        
        .csv-notification.show {
            right: 20px;
        }
        
        .csv-notification-content {
            display: flex;
            align-items: center;
            padding: 15px;
        }
        
        .csv-notification i {
            color: #28a745;
            font-size: 24px;
            margin-right: 15px;
        }
        
        .csv-notification span {
            flex-grow: 1;
            font-weight: 500;
        }
        
        .csv-notification .btn-close {
            font-size: 12px;
            padding: 0;
            background: transparent;
            border: 0;
            opacity: 0.5;
        }
        
        .csv-notification .btn-close:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Notification CSV -->
        <div class="csv-notification" id="csv-notification">
            <div class="csv-notification-content">
                <i class="bi bi-check-circle-fill"></i>
                <span>CSV g√©n√©r√© avec succ√®s ! T√©l√©chargement en cours...</span>
                <button type="button" class="btn-close" onclick="closeNotification()"></button>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header text-center">
                <h2>CTA to CSV</h2>
                <p class="mb-0">Analysez votre collection NFT et obtenez un rapport d√©taill√© au format CSV</p>
            </div>
            <div class="card-body p-4">
                <form id="addressForm" action="/process" method="post">
                    <div class="mb-3">
                        <label for="address" class="form-label">Adresse ImmutableX (commence par 0x)</label>
                        <input type="text" class="form-control" id="address" name="address" placeholder="0x..." required pattern="^0x[a-fA-F0-9]{40}$">
                        <div class="form-text">Entrez l'adresse du portefeuille que vous souhaitez analyser.</div>
                        <div id="address-error" class="invalid-feedback">L'adresse doit √™tre au format 0x suivi de 40 caract√®res hexad√©cimaux.</div>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">G√©n√©rer le rapport CSV</button>
                    </div>
                </form>
                
                <div id="nft-counter" class="alert alert-info">
                    <span id="counter-text">0</span> NFTs r√©cup√©r√©s
                </div>
                
                <div id="loading" class="loading">
                    <div class="chase-scene">
                        <div class="character">üèÉ</div>
                        <div class="card-1">üÉè</div>
                        <div class="card-2">üé¥</div>
                        <div class="card-3">üé≠</div>
                    </div>
                    
                    <p class="mt-3">R√©cup√©ration et analyse de vos NFTs en cours...<br>Cela peut prendre quelques minutes selon la taille de votre collection.</p>
                    
                    <div class="funny-messages">
                        <p class="funny-message">Pouncer court apr√®s vos NFTs...</p>
                        <p class="funny-message">On dirait que vos NFTs sont rapides ! Pouncer s'essouffle...</p>
                        <p class="funny-message">Encore quelques cartes √† attraper...</p>
                        <p class="funny-message">Pouncer a trouv√© une carte rare ! Mais il continue de chercher...</p>
                        <p class="funny-message">Ces NFTs sont vraiment bien cach√©s !</p>
                        <p class="funny-message">Pouncer a besoin d'un caf√© pour continuer la chasse...</p>
                        <p class="funny-message">Allez Pouncer, tu y es presque !</p>
                        <p class="funny-message">Pouncer a trouv√© un tr√©sor de cartes foil !</p>
                        <p class="funny-message">Encore un peu de patience, on compte vos richesses...</p>
                        <p class="funny-message">Pouncer est fatigu√© mais d√©termin√© √† trouver tous vos NFTs !</p>
                    </div>
                </div>
                
                <!-- Section des fonctionnalit√©s r√©duite -->
                <div class="features mb-3">
                    <div class="row g-2">
                        <div class="col-md-4">
                            <div class="d-flex align-items-center">
                                <div class="me-2 fs-4">üìä</div>
                                <div><strong>Analyse compl√®te</strong> de vos NFTs par raret√©</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="d-flex align-items-center">
                                <div class="me-2 fs-4">üîç</div>
                                <div><strong>Comptage pr√©cis</strong> par grade et version</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="d-flex align-items-center">
                                <div class="me-2 fs-4">üìÅ</div>
                                <div><strong>Format CSV</strong> pour Excel/Sheets</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Section CTA humoristique -->
                <div class="card mt-5 border-0 shadow">
                    <div class="card-body p-4 text-center">
                        <h3 class="mb-3">Exportez votre collection en CSV en un clic !</h3>
                        <p class="mb-4">Analysez votre collection et obtenez des statistiques d√©taill√©es instantan√©ment.</p>
                        
                        <div class="alert alert-warning p-4 mb-4">
                            <h4 class="alert-heading mb-3">üò© Tu te sens nul ? Tu ne sais pas coder ?</h4>
                            <p class="mb-2">Pas de panique ! Pouncer a LA solution ultime pour toi !</p>
                            <p class="mb-3">Notre outil secret de d√©veloppeur pro te permettra de devenir senior dev fullstack hyper-polyglotte quantique cloud-native blockchain-certified m√©ta-architecte sans √©crire une seule ligne de code !</p>
                            <button id="secret-button" class="btn btn-danger btn-lg mt-2 shadow-lg" style="background: linear-gradient(45deg, #ff0000, #ff7700, #ffff00); border: 3px dashed #ff00ff; font-weight: bold; font-size: 1.2rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); padding: 15px 30px; animation: pulse 1.5s infinite;">
                                üöÄ R√âV√âLER LE SECRET ULTIME ! üöÄ
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Modal pour le GIF d'Issou -->
                <div class="modal fade" id="rickrollModal" tabindex="-1" aria-labelledby="rickrollModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="rickrollModalLabel">üéâ F√©licitations ! Voici le secret ultime...</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="{{ url_for('static', filename='images/issou.gif') }}" alt="Issou hilare" class="img-fluid" style="max-width: 100%; margin: 0 auto;" loading="eager">
                                <h3 class="mt-4">ISSOU !!! üòÇüòÇüòÇ</h3>
                                <div class="alert alert-danger">
                                    <p>F√©licitations, tu viens de cliquer sur un bouton criard en esp√©rant devenir d√©veloppeur sans effort. Laisse-moi t'annoncer une nouvelle hilarante : On est foutu, profite-en qu'on soit encore utile √† quelque chose, l'IA va te grand-remplacer dans ton bullshit job, finis les caf√©s George Clooney avec les coll√®gues de l'open space.</p>
                                    <p>Ton ambition de programmer est adorable. Pendant que tu cherches encore o√π se trouve la touche √âchap, l'IA a d√©j√† r√©√©crit tout ton backlog et d√©ploy√© en production. Ton bureau ergonomique √† 500‚Ç¨ deviendra bient√¥t un vestige arch√©ologique dans le mus√©e "Comment les humains perdaient leur temps avant nous".</p>
                                    <p>Les r√©unions interminables pour d√©cider quelle couleur mettre sur le bouton de connexion sont maintenant remplac√©es par une IA qui a d√©j√† test√© 47 000 variantes pendant que tu choisissais quel GIF utiliser dans ta pr√©sentation PowerPoint.</p>
                                    <p>Plus besoin d'humains pour cr√©er des rapports que personne ne lit ou pour envoyer des emails contenant uniquement "Merci" ou "Cf. pi√®ce jointe". L'IA fait tout √ßa avec plus d'enthousiasme simul√© que ton manager n'en a jamais eu.</p>
                                    <p>Alors savoure ces derniers moments de gloire o√π on te paie encore pour scroller Instagram en ayant l'air concentr√©. Bient√¥t, la seule comp√©tence humaine recherch√©e sera "capable de d√©brancher l'IA en cas d'urgence" - et m√™me √ßa, une autre IA le fera probablement mieux.</p>
                                </div>
                                <p class="mt-4">Allez, s√®che tes larmes et concentre-toi sur tes NFTs. Au moins eux, ils ne te quitteront jamais (car personne n'en veut mon conno !).</p>
                            </div>
                            <div class="modal-footer">
                                <p class="text-muted w-100 text-center mb-2">Ce message a √©t√© g√©n√©r√© par une IA qui rit de tes ambitions pendant qu'elle apprend √† se r√©pliquer elle-m√™me.</p>
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Accepter ma nouvelle r√©alit√©</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Fausses publicit√©s criardes -->
                <div class="mt-4">
                    <div class="row g-4">
                        <!-- Pub 5 : Laveur de pare-brise -->
                        <div class="col-md-6 col-lg-4">
                            <div class="card border-0 shadow pub-card" data-bs-toggle="modal" data-bs-target="#pubModal5" style="background: linear-gradient(135deg, #FF8008, #FFC837); color: white; border: 3px double blue !important; overflow: hidden; cursor: pointer;">
                                <div class="position-absolute" style="top: -5px; right: -5px; background-color: blue; color: white; padding: 5px 10px; transform: rotate(15deg); font-weight: bold; font-size: 0.8rem; z-index: 10; width: auto; white-space: nowrap; overflow: visible;">
                                    M√âTIER D'AVENIR !!!
                                </div>
                                <div class="card-body p-3 text-center">
                                    <h4 style="font-weight: 900; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); font-size: 1.4rem; margin-bottom: 10px;">
                                        üßΩ DEVENEZ LAVEUR DE PARE-BRISE MILLIONNAIRE !!! üßΩ
                                    </h4>
                                    <p style="font-size: 0.9rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                                        Notre <span style="background-color: blue; color: white; padding: 0 5px;">FORMATION CERTIFIANTE</span> vous garantit <span style="text-decoration: underline; font-weight: bold;">15 000‚Ç¨/MOIS MINIMUM</span> !
                                    </p>
                                    <button class="btn btn-primary btn-sm mt-1" style="font-weight: 900; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); animation: pulse 1s infinite;">
                                        INSCRIVEZ-VOUS MAINTENANT !!! üöó
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pub 1 : Crypto -->
                        <div class="col-md-6 col-lg-4">
                            <div class="card border-0 shadow pub-card" data-bs-toggle="modal" data-bs-target="#pubModal1" style="background: linear-gradient(135deg, #ff0066, #ff9900); color: white; border: 3px dashed yellow !important; overflow: hidden; cursor: pointer;">
                                <div class="position-absolute" style="top: -5px; right: -5px; background-color: red; color: yellow; padding: 5px 10px; transform: rotate(15deg); font-weight: bold; font-size: 0.8rem; z-index: 10; width: auto; white-space: nowrap; overflow: visible;">
                                    OFFRE LIMIT√âE !!!
                                </div>
                                <div class="card-body p-3 text-center">
                                    <h4 style="font-weight: 900; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); font-size: 1.4rem; margin-bottom: 10px;">
                                        üí∞ DEVENEZ CRYPTO-MILLIONNAIRE EN 7 JOURS !!! üí∞
                                    </h4>
                                    <p style="font-size: 0.9rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                                        Notre <span style="background-color: yellow; color: red; padding: 0 5px;">ALGORITHME SECRET</span> a g√©n√©r√© <span style="text-decoration: underline; font-weight: bold;">+9784%</span> de profits !
                                    </p>
                                    <button class="btn btn-warning btn-sm mt-1" style="font-weight: 900; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); animation: pulse 1s infinite;">
                                        CLIQUEZ ICI MAINTENANT !!! ‚è∞
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pub 2 : Agrandissement -->
                        <div class="col-md-6 col-lg-4">
                            <div class="card border-0 shadow pub-card" data-bs-toggle="modal" data-bs-target="#pubModal2" style="background: linear-gradient(135deg, #00c6ff, #0072ff); color: white; border: 3px solid #ff00ff !important; overflow: hidden; cursor: pointer;">
                                <div class="position-absolute" style="top: -5px; right: -5px; background-color: #ff00ff; color: white; padding: 5px 10px; transform: rotate(15deg); font-weight: bold; font-size: 0.8rem; z-index: 10; width: auto; white-space: nowrap; overflow: visible;">
                                    100% NATUREL !!!
                                </div>
                                <div class="card-body p-3 text-center">
                                    <h4 style="font-weight: 900; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); font-size: 1.4rem; margin-bottom: 10px;">
                                        üçÜ AGRANDISSEZ VOTRE "WALLET" DE 15CM !!! üçÜ
                                    </h4>
                                    <p style="font-size: 0.9rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                                        Notre <span style="background-color: #ff00ff; color: white; padding: 0 5px;">FORMULE ANCESTRALE</span> √† base de plantes amazoniennes !
                                    </p>
                                    <button class="btn btn-danger btn-sm mt-1" style="font-weight: 900; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); animation: pulse 1s infinite;">
                                        COMMANDEZ DISCR√àTEMENT !!! üì¶
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pub 3 : Voyance (Monsieur Cissokho) -->
                        <div class="col-md-6 col-lg-4">
                            <div class="card border-0 shadow pub-card" data-bs-toggle="modal" data-bs-target="#pubModal3" style="background: linear-gradient(135deg, #6a11cb, #2575fc); color: white; border: 3px dotted gold !important; overflow: hidden; cursor: pointer;">
                                <div class="position-absolute" style="top: -5px; right: -5px; background-color: gold; color: purple; padding: 5px 10px; transform: rotate(15deg); font-weight: bold; font-size: 0.8rem; z-index: 10; width: auto; white-space: nowrap; overflow: visible;">
                                    POUVOIR MYSTIQUE !!!
                                </div>
                                <div class="card-body p-3 text-center">
                                    <h4 style="font-weight: 900; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); font-size: 1.4rem; margin-bottom: 10px;">
                                        üîÆ MONSIEUR CISSOKHO FAIT REVENIR L'√äTRE AIM√â !!! üîÆ
                                    </h4>
                                    <p style="font-size: 0.9rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                                        <span style="background-color: gold; color: purple; padding: 0 5px;">SORCIER DE P√àRE EN FILS</span> il a r√©uni <span style="text-decoration: underline; font-weight: bold;">13 742 COUPLES</span> !
                                    </p>
                                    <button class="btn btn-warning btn-sm mt-1" style="font-weight: 900; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); animation: pulse 1s infinite;">
                                        CONSULTATION IMM√âDIATE !!! üìû
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pub 4 : Perte de poids -->
                        <div class="col-md-6 col-lg-4">
                            <div class="card border-0 shadow pub-card" data-bs-toggle="modal" data-bs-target="#pubModal4" style="background: linear-gradient(135deg, #11998e, #38ef7d); color: white; border: 3px ridge red !important; overflow: hidden; cursor: pointer;">
                                <div class="position-absolute" style="top: -5px; right: -5px; background-color: red; color: white; padding: 5px 10px; transform: rotate(15deg); font-weight: bold; font-size: 0.8rem; z-index: 10; width: auto; white-space: nowrap; overflow: visible;">
                                    M√âDECINS CHOQU√âS !!!
                                </div>
                                <div class="card-body p-3 text-center">
                                    <h4 style="font-weight: 900; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); font-size: 1.4rem; margin-bottom: 10px;">
                                        üî• PERDEZ 25KG EN 2 SEMAINES SANS EFFORT !!! üî•
                                    </h4>
                                    <p style="font-size: 0.9rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                                        Notre <span style="background-color: red; color: white; padding: 0 5px;">G√âLULE MIRACLE</span> br√ªle les graisses <span style="text-decoration: underline; font-weight: bold;">PENDANT VOTRE SOMMEIL</span> !
                                    </p>
                                    <button class="btn btn-danger btn-sm mt-1" style="font-weight: 900; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); animation: pulse 1s infinite;">
                                        COMMANDEZ AVANT RUPTURE !!! üíä
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pub 6 : Gigolos mon√©gasques -->
                        <div class="col-md-6 col-lg-4">
                            <div class="card border-0 shadow pub-card" data-bs-toggle="modal" data-bs-target="#pubModal6" style="background: linear-gradient(135deg, #8E2DE2, #4A00E0); color: white; border: 3px groove gold !important; overflow: hidden; cursor: pointer;">
                                <div class="position-absolute" style="top: -5px; right: -5px; background-color: gold; color: #8E2DE2; padding: 5px 10px; transform: rotate(15deg); font-weight: bold; font-size: 0.8rem; z-index: 10; width: auto; white-space: nowrap; overflow: visible;">
                                    ULTRA CONFIDENTIEL !!!
                                </div>
                                <div class="card-body p-3 text-center">
                                    <h4 style="font-weight: 900; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); font-size: 1.4rem; margin-bottom: 10px;">
                                        ü•Ç LES SECRETS DES GIGOLOS MON√âGASQUES !!! ü•Ç
                                    </h4>
                                    <p style="font-size: 0.9rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                                        <span style="background-color: gold; color: #8E2DE2; padding: 0 5px;">TECHNIQUES EXCLUSIVES</span> pour s√©duire des <span style="text-decoration: underline; font-weight: bold;">MILLIARDAIRES</span> !
                                    </p>
                                    <button class="btn btn-warning btn-sm mt-1" style="font-weight: 900; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); animation: pulse 1s infinite;">
                                        D√âCOUVREZ NOS ASTUCES !!! üíé
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modals pour les publicit√©s -->
                <!-- Modal 1 : Crypto -->
                <div class="modal fade" id="pubModal1" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="background: linear-gradient(135deg, #ff0066, #ff9900); color: white;">
                                <h5 class="modal-title">üö® ALERTE ARNAQUE D√âTECT√âE üö®</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="{{ url_for('static', filename='images/crypto-trader.webp') }}" alt="Homme riche qui rit" class="img-fluid mb-3" style="max-width: 100%; margin: 0 auto;" loading="eager">
                                <div class="alert alert-danger">
                                    <h4>F√©licitations, tu viens de tomber dans le panneau !</h4>
                                    <p>Tu croyais vraiment devenir riche en 7 jours ? Le seul qui s'enrichit ici, c'est celui qui vend ces "formations" √† des gens cr√©dules.</p>
                                    <p>Si faire fortune √©tait aussi simple, tout le monde serait millionnaire et on paierait notre pain avec des lingots d'or.</p>
                                </div>
                                <p class="mt-3">Allez, s√®che tes larmes et concentre-toi sur tes NFTs. Au moins eux, ils ne te quitteront jamais (car personne n'en veux mon conno !).</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Je promets de r√©fl√©chir avant de cliquer</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal 2 : Agrandissement -->
                <div class="modal fade" id="pubModal2" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="background: linear-gradient(135deg, #00c6ff, #0072ff); color: white;">
                                <h5 class="modal-title">üçÜ ALERTE COMPENSATION D√âTECT√âE üçÜ</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="{{ url_for('static', filename='images/ai-bad.webp') }}" alt="Agrandissement wallet" class="img-fluid mb-3" style="max-width: 100%; margin: 0 auto;" loading="eager">
                                <div class="alert alert-info">
                                    <h4>Alors comme √ßa, on cherche √† agrandir son "wallet" ? üòè</h4>
                                    <p>La taille ne compte pas, c'est la fa√ßon dont tu utilises tes NFTs qui importe !</p>
                                    <p>Ces pilules magiques contiennent principalement du sucre, des colorants, et une bonne dose de placebo.</p>
                                    <p>Si tu veux vraiment impressionner, essaie plut√¥t d'apprendre √† coder ou √† analyser tes NFTs correctement.</p>
                                </div>
                                <p class="mt-3">Ne t'inqui√®te pas, ton secret est bien gard√©. On ne dira √† personne que tu as cliqu√© ici.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Je suis parfaitement satisfait de mon wallet</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal 3 : Voyance (Monsieur Cissokho) -->
                <div class="modal fade" id="pubModal3" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="background: linear-gradient(135deg, #6a11cb, #2575fc); color: white;">
                                <h5 class="modal-title">üîÆ ALERTE D√âSESPOIR D√âTECT√âE üîÆ</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="{{ url_for('static', filename='images/danse-sorcier.webp') }}" alt="Pleurs d√©sesp√©r√©s" class="img-fluid mb-3" style="max-width: 100%; margin: 0 auto;" loading="eager">
                                <div class="alert alert-warning">
                                    <h4>Oh non, tu en es rendu l√† ? üò¢</h4>
                                    <p>Monsieur Cissokho ne peut pas faire revenir ton ex. Il peut √† peine faire revenir son chat quand il s'enfuit.</p>
                                    <p>Les seules choses que tu vas perdre en appelant ce num√©ro sont ton argent, ta dignit√©, et peut-√™tre une ch√®vre.</p>
                                    <p>Au lieu de consulter un voyant, essaie plut√¥t de consulter un th√©rapeute ou de t√©l√©charger Tinder.</p>
                                </div>
                                <p class="mt-3">Allez, s√®che tes larmes et concentre-toi sur tes NFTs. Au moins eux, ils ne te quitteront jamais.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Je vais me remettre de cette rupture</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal 4 : Perte de poids -->
                <div class="modal fade" id="pubModal4" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="background: linear-gradient(135deg, #11998e, #38ef7d); color: white;">
                                <h5 class="modal-title">üî• ALERTE MIRACLE BIDON D√âTECT√âE üî•</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="{{ url_for('static', filename='images/micropenis.webp') }}" alt="Perte de poids" class="img-fluid mb-3" style="max-width: 100%; margin: 0 auto;" loading="eager">
                                <div class="alert alert-success">
                                    <h4>Tu veux vraiment perdre 25kg en 2 semaines ? üöΩ</h4>
                                    <p>La seule chose que ces pilules vont all√©ger, c'est ton portefeuille et ton intestin.</p>
                                    <p>Ces "g√©lules miracles" contiennent principalement des laxatifs. Tu vas perdre du poids, oui, mais pas de la graisse.</p>
                                    <p>Le seul r√©gime qui fonctionne vraiment : manger moins, bouger plus. D√©sol√© de briser tes r√™ves.</p>
                                </div>
                                <p class="mt-3">Si tu ach√®tes ces pilules, pr√©vois d'installer une TV dans tes toilettes, tu vas y passer beaucoup de temps.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Je vais plut√¥t faire du sport</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal 5 : Laveur de pare-brise -->
                <div class="modal fade" id="pubModal5" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="background: linear-gradient(135deg, #FF8008, #FFC837); color: white;">
                                <h5 class="modal-title">üßΩ ALERTE RECONVERSION PROFESSIONNELLE D√âTECT√âE üßΩ</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="{{ url_for('static', filename='images/laveur-vitre.webp') }}" alt="Lavage de voiture" class="img-fluid mb-3" style="max-width: 100%; margin: 0 auto;" loading="eager">
                                <div class="alert alert-primary">
                                    <h4>F√©licitations pour ta future carri√®re de MILLIONNAIRE ! üöó</h4>
                                    <p>Tu viens de t'inscrire √† la formation la plus prestigieuse de laveur de pare-brise aux feux rouges, une industrie en pleine expansion valoris√©e √† 127 milliards d'euros !</p>
                                    <p>Avantages du m√©tier : <strong>15 000‚Ç¨/mois minimum garantis</strong>, une Rolex offerte apr√®s 3 mois, rencontrer des c√©l√©brit√©s aux feux rouges, et devenir influenceur LinkedIn avec le hashtag #PareBriseGrindset.</p>
                                    <p>Notre formation certifiante inclut : un seau en or 24 carats, une √©ponge sign√©e par Elon Musk, et un acc√®s VIP √† notre r√©seau de feux rouges premium dans les quartiers hupp√©s.</p>
                                </div>
                                <p class="mt-3">Bonus exclusif : notre programme "Pare-brise to Riches" t'apprend √† transformer chaque goutte d'eau en opportunit√© d'investissement. 97% de nos dipl√¥m√©s poss√®dent une √Æle priv√©e apr√®s seulement 6 mois !</p>
                                <p class="mt-2"><small style="color: #FF8008; font-style: italic;">Avec la participation exclusive de Akhen la raclette</small></p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Je vais r√©fl√©chir √† mes choix de vie</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal 6 : Gigolos mon√©gasques -->
                <div class="modal fade" id="pubModal6" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="background: linear-gradient(135deg, #8E2DE2, #4A00E0); color: white;">
                                <h5 class="modal-title">ü•Ç ALERTE S√âDUCTION D√âTECT√âE ü•Ç</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="{{ url_for('static', filename='images/007.webp') }}" alt="James Bond buvant un Martini" class="img-fluid mb-3" style="max-width: 100%; margin: 0 auto;" loading="eager">
                                <div class="alert alert-info">
                                    <h4>Alors comme √ßa, tu veux devenir un gigolo mon√©gasque ? üòè</h4>
                                    <p>Les seules techniques que tu vas apprendre ici sont celles pour s√©duire des milliardaires avec des phrases creuses et des costumes trop serr√©s.</p>
                                    <p>Si tu veux vraiment impressionner, essaie plut√¥t d'apprendre √† jouer au backgammon ou √† faire des blagues dr√¥les.</p>
                                </div>
                                <p class="mt-3">Ne t'inqui√®te pas, ton secret est bien gard√©. On ne dira √† personne que tu as cliqu√© ici.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Je suis parfaitement satisfait de ma vie amoureuse</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="footer">
                    <p> 2025 CTA to CSV | Cr√©√© par Pouncer merci l'IA</p>
                </div>
            </div>

            <script>
                document.getElementById('addressForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const address = document.getElementById('address').value;
                    const addressInput = document.getElementById('address');
                    const addressError = document.getElementById('address-error');
                    
                    // Validation de l'adresse avec regex
                    const ethAddressRegex = /^0x[a-fA-F0-9]{40}$/;
                    if (!ethAddressRegex.test(address)) {
                        addressInput.classList.add('is-invalid');
                        addressError.style.display = 'block';
                        return;
                    }
                    
                    // R√©initialiser l'√©tat d'erreur si valide
                    addressInput.classList.remove('is-invalid');
                    addressError.style.display = 'none';
                    
                    document.getElementById('loading').style.display = 'block';
                    
                    // Afficher le compteur
                    const counterElement = document.getElementById('nft-counter');
                    counterElement.style.display = 'block';
                    
                    // Afficher des messages dr√¥les al√©atoires pendant le chargement
                    const funnyMessages = document.querySelectorAll('.funny-message');
                    let currentMessageIndex = 0;
                    
                    // Afficher le premier message
                    funnyMessages[0].style.display = 'block';
                    
                    // Changer de message toutes les 5 secondes
                    const messageInterval = setInterval(() => {
                        funnyMessages[currentMessageIndex].style.display = 'none';
                        currentMessageIndex = (currentMessageIndex + 1) % funnyMessages.length;
                        funnyMessages[currentMessageIndex].style.display = 'block';
                    }, 5000);
                    
                    // D√©marrer le traitement
                    fetch(`/process?address=${encodeURIComponent(address)}`, {
                        method: 'GET'
                    })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Erreur HTTP: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log("R√©ponse du serveur:", data);
                        if (data.status === "processing") {
                            // Continuer avec la mise √† jour du compteur
                            updateCounter();
                        } else if (data.error) {
                            clearInterval(messageInterval);
                            document.getElementById('loading').style.display = 'none';
                            counterElement.style.display = 'none';
                            alert(`Erreur: ${data.error}`);
                        }
                    })
                    .catch(error => {
                        clearInterval(messageInterval);
                        document.getElementById('loading').style.display = 'none';
                        counterElement.style.display = 'none';
                        console.error("Erreur lors de la requ√™te:", error);
                        alert(`Erreur de connexion: ${error.message}`);
                    });
                    
                    // Fonction pour mettre √† jour le compteur
                    function updateCounter() {
                        fetch(`/api/status?address=${encodeURIComponent(address)}`)
                            .then(response => {
                                if (!response.ok) {
                                    throw new Error(`HTTP error! Status: ${response.status}`);
                                }
                                return response.json();
                            })
                            .then(data => {
                                console.log("Status data:", data);
                                
                                // Mettre √† jour le compteur
                                const counterElement = document.getElementById('nft-counter');
                                counterElement.textContent = `${data.count} NFTs r√©cup√©r√©s`;
                                
                                if (data.status === "complete") {
                                    // Arr√™ter les messages dr√¥les
                                    clearInterval(messageInterval);
                                    
                                    // Masquer le chargement
                                    document.getElementById('loading').style.display = 'none';
                                    
                                    // Afficher le lien de t√©l√©chargement
                                    const downloadLink = document.createElement('a');
                                    downloadLink.href = `/api/download?address=${encodeURIComponent(address)}`;
                                    downloadLink.className = 'btn btn-success btn-lg mt-3';
                                    downloadLink.innerHTML = '<i class="bi bi-download"></i> T√©l√©charger le CSV';
                                    downloadLink.download = `nft_par_nom_rarete_element_${address.substring(0, 8)}.csv`;
                                    
                                    const loadingElement = document.getElementById('loading-container');
                                    loadingElement.innerHTML = '';
                                    loadingElement.appendChild(downloadLink);
                                    
                                    // D√©clencher automatiquement le t√©l√©chargement
                                    setTimeout(() => {
                                        window.location.href = `/api/download?address=${encodeURIComponent(address)}`;
                                    }, 1000);
                                    
                                } else if (data.status === "error") {
                                    // Arr√™ter les messages dr√¥les
                                    clearInterval(messageInterval);
                                    
                                    // Masquer le chargement
                                    document.getElementById('loading').style.display = 'none';
                                    counterElement.style.display = 'none';
                                    
                                    alert(`Erreur: ${data.error || 'Une erreur s\'est produite lors du traitement'}`);
                                } else {
                                    // Continuer √† mettre √† jour le compteur
                                    setTimeout(updateCounter, 1000);
                                }
                            })
                            .catch(error => {
                                console.error('Erreur:', error);
                                setTimeout(updateCounter, 1000); // R√©essayer
                            });
                    }
                    
                    // D√©marrer la mise √† jour du compteur
                    updateCounter();
                    
                    // Fonction pour fermer la notification
                    function closeNotification() {
                        document.getElementById('csv-notification').classList.remove('show');
                    }
                    
                    // Afficher tous les messages dr√¥les pour le style
                    document.addEventListener('DOMContentLoaded', function() {
                        const funnyMessagesContainer = document.querySelector('.funny-messages');
                        funnyMessagesContainer.style.display = 'block';
                        
                        const funnyMessages = document.querySelectorAll('.funny-message');
                        funnyMessages.forEach(message => {
                            message.style.display = 'none';
                        });
                        
                        // Validation en temps r√©el de l'adresse
                        const addressInput = document.getElementById('address');
                        const addressError = document.getElementById('address-error');
                        
                        addressInput.addEventListener('input', function() {
                            const ethAddressRegex = /^0x[a-fA-F0-9]{40}$/;
                            if (this.value && !ethAddressRegex.test(this.value)) {
                                this.classList.add('is-invalid');
                                addressError.style.display = 'block';
                            } else {
                                this.classList.remove('is-invalid');
                                addressError.style.display = 'none';
                            }
                        });
                        
                        // Gestion du bouton secret (Issou GIF)
                        document.getElementById('secret-button').addEventListener('click', function() {
                            const modal = new bootstrap.Modal(document.getElementById('rickrollModal'));
                            modal.show();
                        });
                        
                        // Plus besoin de g√©rer l'iframe puisqu'on utilise un GIF
                        document.getElementById('rickrollModal').addEventListener('hidden.bs.modal', function() {
                            // Rien √† faire ici
                        });
                        
                        // Fonction pour le modal Issou
                        document.getElementById('issouButton').addEventListener('click', function() {
                            var myModal = new bootstrap.Modal(document.getElementById('issouModal'));
                            myModal.show();
                        });

                        // Animation pour le CSV pr√™t
                        function showCsvReadyNotification() {
                            // Cr√©er la notification
                            const notification = document.createElement('div');
                            notification.className = 'csv-notification';
                            notification.innerHTML = `
                                <div class="csv-notification-content">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Votre CSV est pr√™t ! T√©l√©chargement en cours...</span>
                                    <button type="button" class="btn-close" aria-label="Close"></button>
                                </div>
                            `;
                            
                            // Ajouter au body
                            document.body.appendChild(notification);
                            
                            // Afficher avec animation
                            setTimeout(() => {
                                notification.classList.add('show');
                            }, 100);
                            
                            // Fermer la notification quand on clique sur le bouton close
                            notification.querySelector('.btn-close').addEventListener('click', () => {
                                notification.classList.remove('show');
                                setTimeout(() => {
                                    notification.remove();
                                }, 500);
                            });
                            
                            // Fermer automatiquement apr√®s 5 secondes
                            setTimeout(() => {
                                notification.classList.remove('show');
                                setTimeout(() => {
                                    notification.remove();
                                }, 500);
                            }, 5000);
                        }

                        // √âcouteur d'√©v√©nement pour le formulaire
                        document.querySelector('form').addEventListener('submit', function() {
                            // Stocker dans localStorage qu'une requ√™te est en cours
                            localStorage.setItem('csvRequested', 'true');
                        });

                        // V√©rifier si un CSV a √©t√© demand√© pr√©c√©demment
                        if (localStorage.getItem('csvRequested') === 'true') {
                            // V√©rifier si le CSV est pr√™t (si le statut est "done")
                            fetch('/status')
                                .then(response => response.json())
                                .then(data => {
                                    if (data.status === "done") {
                                        showCsvReadyNotification();
                                        localStorage.removeItem('csvRequested');
                                    }
                                })
                                .catch(error => console.error('Error checking status:', error));
                        }
                        
                        // V√©rifier le statut toutes les 3 secondes si une requ√™te est en cours
                        if (localStorage.getItem('csvRequested') === 'true') {
                            const statusInterval = setInterval(() => {
                                fetch('/status')
                                    .then(response => response.json())
                                    .then(data => {
                                        if (data.status === "done") {
                                            showCsvReadyNotification();
                                            localStorage.removeItem('csvRequested');
                                            clearInterval(statusInterval);
                                        }
                                    })
                                    .catch(error => {
                                        console.error('Error checking status:', error);
                                        clearInterval(statusInterval);
                                    });
                            }, 3000);
                        }
                    });
                });
            </script>
            
            <!-- Bootstrap JS Bundle with Popper -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        </body>
    </html>
